---
layout: post
title: "เจาะลึกระบบ Clock STM32: ศึกสายเลือด HSI vs HSE ต่างกันยังไง?"
lang: th
ref: stm32-hsi-vs-hse-clocks
permalink: /stm32-hsi-vs-hse-clocks/
description: "อธิบายความแตกต่างระหว่าง HSI และ HSE บนบอร์ด STM32 แบบเข้าใจง่าย เจาะลึกเรื่องความแม่นยำและการเลือกใช้งานสำหรับ USB และโปรเจกต์ทั่วไป"
image: assets/images/stm32-clock-cover.jpg
tags: [STM32, Embedded Systems, Electronics, Microcontrollers]
---

<div class="adsense-slot"></div>

# เจาะลึกระบบ Clock STM32: ศึกสายเลือด HSI vs HSE

สวัสดีครับชาว Maker และ Embedded Engineer ทุกท่าน! หากคุณกำลังทบทวนความรู้ด้วย Flashcard หรือกำลังงงกับหน้า Config Clock ใน STM32CubeMX ว่าจะเลือกอะไรดีระหว่าง **HSI** กับ **HSE** บทความนี้มีคำตอบครับ

คำตอบสั้นๆ ที่เราท่องกันมาคือ "ภายใน" กับ "ภายนอก" นั้นถูกต้องครับ แต่ในหน้างานจริง รายละเอียดทางเทคนิค (Technical Spec) คือตัวชี้วัดว่าโปรเจกต์ของคุณจะ "รอด" หรือ "ล่ม" เรามาขยายความกันใน 3 ประเด็นหลักครับ

## 1. แหล่งกำเนิด (The Source) - สร้างจากอะไร?

### **HSI (High Speed Internal)**
* **คืออะไร:** มันคือวงจร **RC Oscillator** (ตัวต้านทาน-ตัวเก็บประจุ) ที่ฝังอยู่บนแผ่นซิลิกอนภายในตัวชิปเลยครับ
* **การทำงาน:** สร้างจังหวะสัญญาณจากการประจุและคายประจุไฟฟ้า
* **ข้อดี:** ของฟรี! ไม่ต้องต่ออุปกรณ์เพิ่ม ประหยัดพื้นที่บน PCB และทีเด็ดคือ **Startup Time เร็วมาก** (ตื่นปุ๊บทำงานปั๊บ)
* **บน STM32F4:** ค่า Default โรงงานมักจะเป็น 16 MHz ครับ

### **HSE (High Speed External)**
* **คืออะไร:** แหล่งสัญญาณจากภายนอก ส่วนใหญ่เราจะใช้ **Crystal (คริสตัล)** หรือ Ceramic Resonator ต่อที่ขา `OSC_IN` และ `OSC_OUT`
* **ข้อดี:** ให้ความถี่ที่ **แม่นยำและเสถียรสูงมาก** เมื่อเทียบกับของแถมอย่าง HSI

![แผนภาพเปรียบเทียบโครงสร้างภายใน HSI และการต่อ Crystal ภายนอกแบบ HSE]({{ site.baseurl }}/assets/images/stm32-clock-diagram.jpg)

## 2. ความแม่นยำ (Accuracy) - จุดตายของงานสื่อสาร

นี่คือเหตุผลหลักที่เราต้องยอมจ่ายเงินเพิ่มค่า Crystal ครับ

* **HSI (แกว่งง่าย):** มีความคลาดเคลื่อนประมาณ **1%** ที่อุณหภูมิห้อง แต่จุดอ่อนคือ **"แพ้อุณหภูมิ"** ครับ ถ้าชิปร้อนขึ้นจากการทำงานหนัก ความถี่อาจเพี้ยนไปได้ถึง 2-3% ซึ่งมากพอที่จะทำให้ระบบสื่อสารล่ม
* **HSE (เป๊ะเวอร์):** มีความแม่นยำระดับ **ppm (part per million)** คือล้านส่วนเพี้ยนไม่กี่ส่วน อุณหภูมิเปลี่ยนก็ยังนิ่งครับ

## 3. สถานการณ์ใช้งาน (Usage Scenario) - เลือกตัวไหนดี?

### **เลือก HSI เมื่อ:**
* ทำโปรเจกต์ทั่วไป เช่น ไฟกระพริบ, อ่านปุ่มกด, ขับ Motor, หรืออ่าน Sensor ง่ายๆ (I2C/SPI พอไหว)
* ต้องการประหยัดงบประมาณและพื้นที่บอร์ด
* ต้องการระบบ Low Power ที่ตื่นจาก Sleep Mode มาทำงานทันที (HSI สตาร์ทเร็วกว่า HSE มาก)

### **เลือก HSE เมื่อ:**
* **ใช้งาน USB:** จำเป็นมาก! High Speed USB ต้องการความแม่นยำระดับ ±500 ppm ซึ่ง HSI ทำไม่ได้ (ถ้าฝืนใช้ USB จะหลุดบ่อยหรือไม่ Connect เลย)
* **ใช้งาน Ethernet หรือ CAN Bus:** ระบบพวกนี้ต้องการ Timing ที่แม่นยำสูง
* ต้องการนาฬิกาที่เดินตรงเป๊ะๆ ในระยะยาว

<div class="adsense-slot"></div>

## สรุป (Conclusion)

ถ้าคุณจะจดโน้ตเพิ่มเติมลงใน Flashcard หรือสรุปให้เพื่อนฟัง จำง่ายๆ ว่า:

> **"HSI สะดวก เร็ว ฟรี แต่เพี้ยนเมื่อร้อน... ส่วน HSE ต้องต่อเพิ่ม เสียเงิน แต่แม่นยำสูง จำเป็นสำหรับงาน USB และ Communication"**

หวังว่าภาพของ HSI และ HSE จะชัดเจนขึ้นนะครับ ใครที่กำลังออกแบบบอร์ดเอง อย่าลืมเผื่อที่วาง Crystal สำหรับงานที่ต้องการความชัวร์ด้วยนะครับ!